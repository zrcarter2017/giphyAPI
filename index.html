<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Giphy API</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
	<link rel="stylesheet" href="assets/css/style.css">
	<link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet">
</head>
<body>
	<div class = "container-fluid header">
		<div id="title">
			<h1>Comedy Gifs</h1>
		</div>
		<div id="subtitle">
			<h4 class="text-muted">Share a laugh</h3>
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="col-md-4">
				<div class="card">
				  	<h4 class="card-header">Who makes you laugh?</h4>
				  	<div class="card-body">
				    	<h4 class="card-title">Find a Comedian</h4>
				    	<p class="card-text">Add your favorite comedian to the list of giphys.</p>
					    	<div class = "addComedian">
					    	<input id="comedian" type = "text" placeholder="ex. Kevin Hart" />
					    	<a class="btn btn-primary newComedian">Add comedian</a>
					    	</div>

	<!-- 			    	This is where the buttons will go
	 -->			    	<div id="buttons">
				    		</div>
				  	</div>
				</div>
			</div>
			<div class = "col-md-8">
<!-- 				This is where the giphys will go
 -->			<div id = "giphy">

				</div>
	
			</div>
		</div>
	</div>


	<script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


		<script type="text/javascript">

			//array of comedians
			topics = ['will ferrell', 'jack black', 'adam sandler', 'jim carey'];


			//create a button for all items in topic array
			for (var i = 0; i < topics.length; i++) {
				$('#buttons').append("<button class='btn btn-success newButton'" + "data-person=" + '"' + topics[i] + '"' + ">" + topics[i] + "</button>");
				console.log(topics[i]);
			}




			// get input box
			var comedian = document.getElementById('comedian');

			//push user input to topics array and add a button

			$('.newComedian').on("click", function() {
				console.log(comedian.value);
				topics.push(comedian.value.toLowerCase());
				console.log(topics);
				$('#buttons').prepend("<button class='btn btn-success newButton'"  + "data-person=" + "'" + comedian.value.toLowerCase() +"'" + ">" + comedian.value + "</button>");
				console.log(comedian.value.toLowerCase());
			});



			//add event listener for #buttons div, call ajax and display gifs when button is clicked

		    $("#buttons").on("click", ".newButton", function() {
		    	event.preventDefault();
		      var person = $(this).attr("data-person");
		      console.log(person);
		      var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
		        person + "&api_key=WrZVFEkjylZmt1AO1PyAmKS2uPtf4eLK&limit=10";

		      $.ajax({
		          url: queryURL,
		          method: "GET"
		        })
		        .done(function(response) {
		          console.log(response);
		          var results = response.data;

		          for (var i = 0; i < results.length; i++) {
		            var gifDiv = $("<div class='item' data-state='still'>");

		            var rating = results[i].rating;

		            var p = $("<p>").text("Rating: " + rating);

		            var comedianImage = $("<img>");
		            comedianImage.attr("src", results[i].images.fixed_height.url);

		            gifDiv.prepend(p);
		            gifDiv.prepend(comedianImage);

		            $("#giphy").prepend(gifDiv);
		          }
		        });
		    });

		    //pause and play gifs

		        $(".item").on("click", function() {
		       
			        var state = $(this).attr("data-state");
			        
			        if (state == "still") {

			          $(this).attr("data-state", "animate");
			          $(this).attr("src", "data-animate");
			          console.log("this was still");
			        }

			        else
			      
			        {
			          $(this).attr("data-state", "still");
			          $(this).attr("src", $(this).attr("data-still"));
			        }

			        console.log(state);

			    });

		  </script>











</body>
</html>